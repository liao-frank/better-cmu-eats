{"version":3,"sources":["utils/CMUEats/CMUEats.js","utils/CMUEats/index.js","utils/onesec/onesec.js","utils/onesec/index.js","components/Star/index.js","components/Star/Star.js","components/Card/index.js","components/Card/Card.js","components/Search/index.js","components/Search/Search.js","components/App/index.js","components/App/App.js","serviceWorker.js","index.js"],"names":["utils_CMUEats_CMUEats","_this","this","axios","get","then","res","format","obj","locations","data","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","location","value","attachEateryMetadata","Date","err","return","map","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","name","apiFmtToInt","e","day","hour","min","t","r","times","n","getDay","getHours","getMinutes","dateToAPIFmt","a","start","end","reduce","i","setDate","getDate","setHours","setMinutes","setSeconds","toJSON","getAPIFmtConversion","s","sort","Object","assign","isOpen","nextTime","CMUEats","isStateful","Component","prototype","render","wrapComponent","OnesecComponent","_React$Component","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","ref","React","createRef","prevRect","prevScroll","componentWillNeedPaint","bind","assertThisInitialized","componentWillPaint","inherits","createClass","key","node","getCurrentNode","_this$last","last","nextRect","nextScroll","first","_this2","play","requestAnimationFrame","_this2$last","invert","getBoundingClientRect","x","window","scrollX","y","scrollY","prev","topDiff","top","leftDiff","left","style","transition","transform","concat","arguments","length","current","ReactDOM","findDOMNode","react_default","createElement","onesec","willOnesec","defineProperty","attachOnesec","Error","Star","active","onClick","classNames","push","className","join","Card","_this$props","title","color","starred","toggleStarred","children","components_Star","Search","inputNode","focus","onChange","spellCheck","placeholder","target","PureComponent","App","state","loading","getStarred","searchTerm","dark","update","components_Search","val","setState","renderCards","_this3","renderedLocations","getRenderedLocations","sortLocations","l","components_Card","getTagline","_this$state","keys","fuzzy","filter","el","string","nextMoment","moment","tagline","fromNow","charAt","toLowerCase","slice","calendar","arr","attr","item1","item2","value1","value2","console","error","retrieve","_this4","catch","raw","localStorage","getItem","JSON","parse","newMap","scrollTo","setItem","stringify","Boolean","hostname","match","components_App","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.1ab0694c.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://apis.scottylabs.org/dining/v1/locations';\n\nclass CMUEats {\n  get() {\n    const promise = axios\n      .get(URL)\n      .then(res => this.format(res));\n    return promise;\n  }\n\n  format(obj) {\n    const { data } = obj;\n    let { locations } = data;\n\n    for (let location of locations) {\n      attachEateryMetadata(location, new Date());\n    }\n    const map = {};\n\n    for (let location of locations) {\n      map[location.name] = location;\n    }\n    return map;\n  }\n\n}\n\nexport default new CMUEats();\n\nconst getAPIFmtConversion = (e) => {\n  let t = new Date(e);\n  return function(e) {\n    let r = new Date(t);\n    let n = (e.day + 7 - r.getDay()) % 7;\n    r.setDate(r.getDate() + n);\n    r.setHours(e.hour);\n    r.setMinutes(e.min);\n    r.setSeconds(0);\n    t > r && r.setDate(r.getDate() + 7);\n    return r.toJSON();\n  }\n};\n\nconst dateToAPIFmt = (e) => {\n  let t = new Date(e);\n  return {\n    day: t.getDay(),\n    hour: t.getHours(),\n    min: t.getMinutes()\n  };\n};\n\nconst apiFmtToInt = (e) => {\n  return 1e4 * e.day + 100 * e.hour + e.min;\n};\n\nconst attachEateryMetadata = (e, t) => {\n  let r = e.times;\n  let n = apiFmtToInt(dateToAPIFmt(t));\n  let a = r.map(function(e) {\n      let t = apiFmtToInt(e.start),\n        r = apiFmtToInt(e.end);\n      return r > t ? n >= t && r > n : n >= t || r > n;\n    }).reduce(function(e, t) {\n      return e || t;\n    }, !1);\n  let i = getAPIFmtConversion(t);\n  let s = r.map(function(e) {\n      return i(a ? e.end : e.start);\n    }).sort()[0];\n  return Object.assign(e, {\n    isOpen: a,\n    nextTime: s\n  });\n}\n","import CMUEats from './CMUEats';\n\nexport default CMUEats;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst attachOnesec = (Component) => {\n  if (!isStateful(Component)) {\n    throw new Error('Onesec can only be attached to stateful components');\n  }\n  else {\n    return wrapComponent(Component);\n  }\n};\n\nconst isStateful = (Component) => {\n  return typeof Component === 'string' || Component.prototype.render;\n}\n\nconst wrapComponent = (Component) => {\n  const OnesecComponent = class extends React.Component {\n    constructor(props) {\n      super(props);\n      this.ref = React.createRef();\n      this.prevRect = undefined;\n      this.prevScroll = undefined;\n      this.componentWillNeedPaint = this.componentWillNeedPaint.bind(this);\n      this.componentWillPaint = this.componentWillPaint.bind(this);\n    }\n\n    getSnapshotBeforeUpdate() {\n      this.componentWillNeedPaint();\n      return null;\n    }\n\n    componentDidUpdate() {\n      this.componentWillPaint();\n    }\n\n    componentDidMount() {\n      this.componentWillNeedPaint();\n    }\n\n    componentWillNeedPaint() {\n      const node = this.getCurrentNode();\n      if (node) {\n        const { nextRect, nextScroll } = this.last(node);\n        this.first(nextRect, nextScroll);\n      }\n    }\n\n    componentWillPaint() {\n      const node = this.getCurrentNode();\n      if (node) {\n        this.play(node, false);\n        requestAnimationFrame(() => {\n          const { nextRect, nextScroll } = this.last(node);\n          this.invert(\n            node,\n            { prevRect: this.prevRect, prevScroll: this.prevScroll },\n            { nextRect, nextScroll }\n          );\n          requestAnimationFrame(() => {\n            this.play(node);\n          });\n          this.first(nextRect, nextScroll);\n        });\n      }\n    }\n\n    first(nextRect, nextScroll) {\n      this.prevRect = nextRect;\n      this.prevScroll = nextScroll;\n    }\n\n    last(node) {\n      return {\n        nextRect: node.getBoundingClientRect(),\n        nextScroll: {\n          x: window.scrollX,\n          y: window.scrollY\n        }\n      };\n    }\n\n    invert(node, prev, next) {\n      const { prevRect, prevScroll } = prev;\n      const { nextRect, nextScroll } = next;\n      const topDiff = (prevRect.top + prevScroll.y) - (nextRect.top + nextScroll.y);\n      const leftDiff = (prevRect.left + prevScroll.x) - (nextRect.left + nextScroll.x);\n\n      node.style.transition = 'none';\n      node.style.transform = `translate(${leftDiff}px, ${topDiff}px)`;\n    }\n\n    play(node, transition=true) {\n      node.style.transition = transition ? '' : 'none';\n      node.style.transform = 'translate(0px, 0px)';\n    }\n\n    getCurrentNode() {\n      if (this.ref.current) {\n        return ReactDOM.findDOMNode(this.ref.current);\n      }\n    }\n\n    render() {\n      return (\n        <Component\n          ref={this.ref}\n          onesec={this.componentWillPaint}\n          willOnesec={this.componentWillNeedPaint}\n          {...this.props}\n        />\n      );\n    }\n  }\n\n  Object.defineProperty(OnesecComponent, 'name', {\n    value: 'Onesec' + Component.name\n  });\n  return OnesecComponent;\n}\n\nexport default attachOnesec;\n","import attachOnesec from './onesec';\n\nexport default attachOnesec;\n","import Star from './Star';\n\nexport default Star;\n","import React from 'react';\n\nimport './Star.css';\n\nconst Star = (props) => {\n  const { active, onClick } = props;\n  const classNames = ['star', 'icon-32'];\n  active && classNames.push('active');\n\n  return (\n    <div\n      className={classNames.join(' ')}\n      onClick={onClick}\n    >\n      <div className=\"icon-star-outline icon icon-32\"></div>\n      <div className=\"icon-star icon icon-32\"></div>\n    </div>\n  );\n};\n\nexport default Star;\n","import Card from './Card';\n\nexport default Card;\n","import React, { Component } from 'react';\nimport attachOnesec from 'utils/onesec';\nimport Star from 'components/Star';\n\nimport './Card.css';\n\nclass Card extends Component {\n  render() {\n    const {\n      title,\n      color,\n      starred, toggleStarred\n    } = this.props;\n\n    const classNames = ['card'];\n    color && classNames.push(color);\n\n    return (\n      <div className={classNames.join(' ')}>\n        <div className=\"content\">\n          <h1 className=\"title\">\n            <span>{ title }</span>\n          </h1>\n          <div className=\"subtitle\">\n            { this.props.children }\n          </div>\n        </div>\n        <div className=\"controls\">\n          <Star\n            onClick={toggleStarred}\n            active={starred}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default attachOnesec(Card);\n// export default Card;\n","import Search from './Search';\n\nexport default Search;\n","import React, { PureComponent } from 'react';\n\nimport './Search.css';\n\nclass Search extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.inputNode = undefined;\n\n    this.focus = this.focus.bind(this);\n    this.onChange = this.onChange.bind(this);\n  }\n\n  render() {\n    const searchClassNames = ['search'];\n\n    const barClassNames = ['bar', 'flex-row'];\n\n    return (\n      <div\n        className={searchClassNames.join(' ')}\n        onClick={this.focus}\n      >\n        <div className={barClassNames.join(' ')}>\n          <div className=\"icon icon-24 icon-glass unselectable\"></div>\n          <input\n            ref={(node) => { this.inputNode = node }}\n            spellCheck=\"false\"\n            onChange={this.onChange}\n            placeholder=\"Search\"\n          />\n        </div>\n      </div>\n    );\n  }\n\n  focus() {\n    const { inputNode } = this;\n    if (inputNode) {\n      inputNode.focus();\n    }\n  }\n\n  onChange(e) {\n    const {\n      onChange\n    } = this.props;\n\n    if (onChange) {\n      const { value } = e.target;\n      onChange(value);\n    }\n  }\n}\n\nexport default Search;\n","import App from './App';\n\nexport default App;\n","import React, { Component } from 'react';\nimport fuzzy from 'fuzzy';\nimport moment from 'moment';\nimport CMUEats from 'utils/CMUEats';\nimport Card from 'components/Card';\nimport Search from 'components/Search';\n// import Pill from 'components/Pill';\n\nimport './App.css';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      locations: {},\n      starred: this.getStarred(),\n      searchTerm: '',\n      dark: false\n    };\n\n    this.toggleStarred = this.toggleStarred.bind(this);\n  }\n\n  componentDidMount() {\n    this.update();\n  }\n\n  render() {\n    const { loading } = this.state;\n\n    return (\n      <div className=\"app\">\n        <Search\n          onChange={((val) => {this.setState({ searchTerm: val })})}\n        />\n        <div className=\"separator\"></div>\n        {\n          loading ?\n            <div className=\"message header\">Loading...</div> :\n            this.renderCards()\n        }\n      </div>\n    );\n  }\n\n  renderCards() {\n    const { starred } = this.state;\n    const renderedLocations = this.getRenderedLocations();\n    this.sortLocations(renderedLocations, 'isOpen');\n    this.sortLocations(renderedLocations, l => starred[l.name] || false);\n\n    if (renderedLocations.length === 0) {\n      return (<div className=\"message header\">Nothing to see here.</div>);\n    }\n    return renderedLocations.map((l) => {\n      return (\n        <Card\n          key={l.name}\n          title={l.name}\n          color={l.isOpen ? 'green' : 'red'}\n          starred={starred[l.name] || false}\n          toggleStarred={() => { this.toggleStarred(l.name); }}\n        >\n          <div className=\"header\">{ l.location }</div>\n          { this.getTagline(l) }\n        </Card>\n      );\n    });\n  }\n\n  getRenderedLocations() {\n    const {\n      locations,\n      searchTerm\n    } = this.state;\n    let renderedLocations = Object.keys(locations);\n    if (searchTerm) {\n      const results = fuzzy.filter(searchTerm, renderedLocations);\n      renderedLocations = results.map(el => el.string);\n    }\n    return renderedLocations.map(name => locations[name]);\n  }\n\n  getTagline(location) {\n    const { isOpen, nextTime } = location;\n    let nextMoment = moment(nextTime);\n    let tagline = isOpen ? 'Closes ' : 'Opens ';\n    tagline += nextMoment.fromNow().charAt(0).toLowerCase() + nextMoment.fromNow().slice(1);\n    tagline += \" (\" + nextMoment.calendar() + \")\";\n    return tagline;\n  }\n\n  sortLocations(arr, attr) {\n    arr.sort((item1, item2) => {\n      let value1;\n      let value2;\n      if (typeof attr === 'string') {\n        value1 = item1[attr];\n        value2 = item2[attr];\n      }\n      else if (typeof attr === 'function') {\n        value1 = attr(item1);\n        value2 = attr(item2);\n      }\n      else {\n        console.error('Failed to sort locations on ' + attr);\n        return 0;\n      }\n      if (value1 === value2) {\n        return 0;\n      }\n      if (value1 && !value2) {\n        return -1;\n      }\n      return 1;\n    });\n  }\n\n  update() {\n    // this.setState({ loading: true }, () => {\n    //   this.retrieve();\n    // });\n    this.retrieve();\n  }\n\n  retrieve() {\n    CMUEats\n      .get()\n      .then((data) => {\n        this.setState({\n          loading: false,\n          locations: data\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        this.setState({\n          loading: false,\n          locations: []\n        });\n      });\n  }\n\n  getStarred() {\n    const raw = localStorage.getItem('starred');\n    return raw ? JSON.parse(raw) : {};\n  }\n\n  toggleStarred(name) {\n    const { starred } = this.state;\n    const newMap = Object.assign({}, starred);\n    newMap[name] = newMap[name] ? false : true;\n\n    // WTF? Prevent shitty scrolling behavior.. what the hell is this?\n    const prevScroll = window.scrollY;\n    this.setState({ starred: newMap }, () => {\n      requestAnimationFrame(() => {\n        window.scrollTo(0, prevScroll);\n      });\n    });\n    localStorage.setItem('starred', JSON.stringify(newMap));\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from 'components/App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}